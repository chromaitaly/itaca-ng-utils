/*****************************************************************/
/** chroma-utils v1.0.0 08-11-2017	**/
/** chroma-utils, logos and all images are registered     	**/
/** trademarks of Chroma Italy Hotels srl.                     	**/
/** All rights reserved.                                     	**/
/** Registration code: 21-11-2016/011058        	**/
/** 						                                 	**/
/**                               Chroma Italy Hotels srl ® 2016	**/
/*****************************************************************/
!function(){"use strict";angular.module("chroma.utils",["ngMaterial"])}(),function(){"use strict";function e(e){var n=this;this.$init=function(){_.isArray(e)&&_.forEach(e,function(e,i){n.addOption(i,e)})},this.addOption=function(e,i){return!!angular.isString(e)&&(n[e]=i,!0)},this.addOptionStrict=function(e,i){return!!angular.isString(e)&&(!n.hasOwnProperty(e)&&(n[e]=i,!0))},this.updateOption=function(e,i){if(!angular.isString(e))return!1;if(!n.hasOwnProperty(e))return n.addOption(e,i);var t=n[e];return n[e]=i,t},this.$init()}angular.module("chroma.utils").provider("AppOptions",function(){var n={defaultLang:"en",page:{title:"Home"}};this.init=function(e,i){if(!_.isPlainObject(e))return!1;_.isBoolean(i)&&i?n=e:_.assign(n,e)},this.$get=function(){return new e(n)}})}(),function(){"use strict";function e(e,n){var i=function(n){var i={};if(e.$broadcast("onBeforeUnload",i).defaultPrevented)return i.message};return n.addEventListener("beforeunload",i),n.onbeforeunload=i,n.onunload=function(){e.$broadcast("onUnload")},{}}e.$inject=["$rootScope","$window"],angular.module("chroma.utils").factory("_beforeUnload",e)}(),function(){"use strict";angular.module("chroma.utils").factory("ContactUtils",function(){var e={};return e.getUri=function(e,n){var i="";switch(e){case"PHONE":case"MOBILE":case"FAX":i="tel:";break;case"MAIL":i="mailto:";break;case"WEBSITE":i="http://";break;case"FACEBOOK":i="https://www.facebook.com/";break;case"TWITTER":i="https://www.twitter.com/";break;case"INSTAGRAM":i="https://www.instagram.com/";break;default:i="http://"}return i+n},e})}(),function(){"use strict";function e(e,n,i,t){var r={};return r.absoluteDate=function(e,n){return r.absoluteMoment(e,n).toDate()},r.absoluteMoment=function(e,i){var t=e?n(e):n(),r=n(t).utc([t.year(),t.month(),t.date()]);return i?r:r.startOf("day")},r.dateForTimezone=function(e,i){return n.tz(e,i)},r.hotelDate=function(e){return t.hotel&&t.hotel.addressInfo&&t.hotel.addressInfo.timeZoneId?r.dateForTimezone(t.hotel.addressInfo.timeZoneId):n(e).utcOffset((t.defaultOffset||0)/60)},r.convertDateStringsToDates=function(n,t,o){if("object"!=typeof n)return n;t=t||10,o=o||0;for(var a in n)if(n.hasOwnProperty(a)){var c,s=n[a];if("string"==typeof s&&(c=s.match(i.dateString))){var u=c[0];try{var l=Date.parse(u);isNaN(l)||(n[a]=new Date(l)),u=void 0,l=void 0}catch(n){e.warn("Error converting date '"+u+"': "+n)}}else"object"==typeof s&&o<t&&r.convertDateStringsToDates(s,t,o+1)}},r.weekdays=function(){var e=[];return _.forEach(n.weekdays(!0),function(i,t){var r=n().day(i);e.push({label:i,day:r.day(),weekday:r.weekday(),isoWeekday:r.isoWeekday()})}),e},r.secondsToOffsetString=function(e){if(_.isNil(e))return"";if(e=Number(e),_.isNaN(e))return"";var n=String(Math.floor(Math.abs(e)/3600));n=n.length<2?"0"+n:n;var i=String(Math.floor(Math.abs(e)%3600/60));return i=i.length<2?"0"+i:i,(e>0?"+":"-")+n+i},r.rangeTimeChecker=function(e,i,t){var r=n.utc(e).seconds(0).milliseconds(0),o=n.utc(i),a=n(r).hours(o.hours()).minutes(o.minutes()).seconds(0).milliseconds(0),c=n.utc(t),s=n(r).hours(c.hours()).minutes(c.minutes()).seconds(0).milliseconds(0);return s=s.hours()>=a.hours()&&s.hours()<=23?s:s.add(1,"days"),r=r.hours()>=a.hours()&&r.hours()<=23?r:r.add(1,"days"),n.range(a,s).contains(r)},r}e.$inject=["$log","moment","REGEXP","AppOptions"],angular.module("chroma.utils").factory("DateUtils",e)}(),function(){"use strict";function e(e){var n={};return n.focusFirstInvalid=function(i){var t=angular.isObject(i)?i:document.getElementsByName(i)[0];if(t&&angular.isElement(t)&&angular.isFunction(t.querySelector)){var r=t.querySelector(".ng-invalid:not([disabled]):not([type='hidden'])");return!!r&&(_.isEqual(r.tagName.toLowerCase(),"ng-form")?n.focusFirstInvalid(r):(r.focus(),e.scrollToElementAnimated(r),!0))}},n.focusFirstInput=function(i){var t=angular.isObject(i)?i:document.getElementsByName(i)[0];if(t&&angular.isElement(t)&&angular.isFunction(t.querySelector)){var r=t.querySelector("input:not([disabled]):not([type='hidden'])");return!!r&&(r.focus(),e.scrollToElementAnimated(r,n.offset),!0)}},n.isInvalid=function(e){var n=document[e];if(n&&angular.isFunction(n.querySelector))return!!n.querySelector(".ng-invalid")},n}e.$inject=["$document"],angular.module("chroma.utils").factory("FormUtils",e)}(),function(){"use strict";function e(e){var n={};return n.isElementInView=function(n,i){var t=angular.element(n)[0];if(!t)return!1;var r=e.pageYOffset,o=r+e.innerHeight,a=t.offsetTop,c=a+t.offsetHeight;return!0===i?r<a&&o>c:a<=o&&c>=r},n.getScrollParent=function(e){var i=angular.element(e)[0];return null===i?null:i.scrollHeight>i.clientHeight?i:n.getScrollParent(i.parentNode)},n}e.$inject=["$window"],angular.module("chroma.utils").factory("HtmlUtils",e)}(),function(){"use strict";angular.module("chroma.utils").factory("IconUtils",function(){var e={};return e.languageIcons=function(){return{ITALIAN:{icon:"flag-icon flag-icon-it"},ENGLISH:{icon:"flag-icon flag-icon-gb"},FRENCH:{icon:"flag-icon flag-icon-fr"},SPANISH:{icon:"flag-icon flag-icon-es"},GERMAN:{icon:"flag-icon flag-icon-de"},PORTUGUESE:{icon:"flag-icon flag-icon-pt"},RUSSIAN:{icon:"flag-icon flag-icon-ru"},MANDARIN:{icon:"flag-icon flag-icon-cn"},HINDI:{icon:"flag-icon flag-icon-in"},ARABIC:{icon:"flag-icon flag-icon-sa"},BENGALI:{icon:"flag-icon flag-icon-bd"},JAPANESE:{icon:"flag-icon flag-icon-jp"},PUNJABI:{icon:"flag-icon flag-icon-pk"},JAVANESE:{icon:"flag-icon flag-icon-id"},WU:{icon:"flag-icon flag-icon-cn"},MALAY_INDONESIAN:{icon:"flag-icon flag-icon-in"},TELUGU:{icon:"flag-icon flag-icon-in"},VIETNAMESE:{icon:"flag-icon flag-icon-vn"},MARATHI:{icon:"flag-icon flag-icon-in"},TAMIL:{icon:"flag-icon flag-icon-lk"},URDU:{icon:"flag-icon flag-icon-ae"},TURKISH:{icon:"flag-icon flag-icon-tr"},LANG_SIGN:{icon:"material-icons flaticon-hearing-impaired"},LANG_SIGN_IT:{icon:"material-icons flaticon-hearing-impaired"}}},e.contactIcons=function(){return{PHONE:{icon:"mdi mdi-phone",type:"contact.phone",prefix:"tel:",suffix:""},MOBILE:{icon:"mdi mdi-cellphone-android",type:"contact.mobile",prefix:"tel:",suffix:""},FAX:{icon:"mdi mdi-fax",type:"contact.fax",prefix:"tel:",suffix:""},EMAIL:{icon:"mdi mdi-email",type:"contact.email",prefix:"mailto:",suffix:""},WEBSITE:{icon:"mdi mdi-web",type:"contact.website",prefix:"",suffix:""},FACEBOOK:{icon:"mdi mdi-facebook-box",type:"contact.facebook",prefix:"https://facebook.com/",suffix:""},TWITTER:{icon:"mdi mdi-twitter-box",type:"contact.twitter",prefix:"https://twitter.com/",suffix:""},INSTAGRAM:{icon:"mdi mdi-instagram",type:"contact.instagram",prefix:"https://www.instagram.com/",suffix:""},WHATSAPP:{icon:"mdi mdi-whatsapp",type:"contact.whatsapp",prefix:bowser.ios?"whatsapp://send?":"intent://send/",suffix:bowser.ios?"":"#Intent;scheme=smsto;package=com.whatsapp;action=android.intent.action.SENDTO;end"},SKYPE:{icon:"mdi mdi-skype",type:"contact.skype",prefix:"skype://",suffix:"?call"},VIBER:{icon:"mdi mdi-phone",type:"contact.viber",prefix:"viber://forward?",suffix:""},TELEGRAM:{icon:"mdi mdi-telegram",type:"contact.telegram",prefix:"tg://",suffix:""}}},e.paymentIcons=function(){return{PAYPAL:"pf pf-paypal",VISA:"pf pf-visa",MASTERCARD:"pf pf-mastercard",AMEX:"pf pf-american-express",BIT_COIN:"pf pf-bitcoin",CARTA_SI:"pf pf-carta-si",DINERS_CLUB:"pf pf-diners",DISCOVER:"pf pf-discover",JCB:"pf pf-jcb",UNION_PAY:"pf pf-unionpay",VISA_ELECTRON:"pf pf-visa-electron",V_PAY:"pf pf-visa",MAESTRO:"pf pf-maestro",CIRRUS:"pf pf-cirrus",POSTEPAY:"pf pf-postepay",APPLE_PAY:"pf pf-apple-pay",PAGSEGURO:"pf pf-pagseguro",BANCONTACT:"pf pf-bancontact-mister-cash",BANCOMAT:"pf pf-card"}},e.serviceIcon=function(){return{"service.type.technology.console":"mdi mdi-gamepad-variant","service.type.technology.games":"mdi mdi-gamepad-variant","service.type.technology.tv.flat":"mdi mdi-monitor","service.type.technology.tv":"mdi mdi-monitor","service.type.entertainment.children.tv":"mdi mdi-monitor","service.type.popular.pet.small":"mdi mdi-paw","service.type.popular.pet.medium":"mdi mdi-paw","service.type.popular.pet.large":"mdi mdi-paw","service.type.popular.pet.disabled":"mdi mdi-paw","service.type.popular.router":"mdi mdi-router-wireless","service.type.miscellaneous.air.conditioning":"mdi mdi-air-conditioner","service.type.room.air.conditioning":"mdi mdi-air-conditioner","service.type.miscellaneous.heating":"mdi mdi-air-conditioner","service.type.transport.parking.secured":"mdi mdi-parking","service.type.transport.parking.street":"mdi mdi-parking","service.type.transport.parking.accessible":"mdi mdi-parking","service.type.popular.bouquet":"mdi mdi-flower","service.type.popular.rose":"mdi mdi-flower","service.type.popular.breakfast.continental":"mdi mdi-food-fork-drink","service.type.popular.breakfast":"mdi mdi-food-fork-drink","service.type.popular.breakfast.room":"mdi mdi-food-fork-drink","service.type.miscellaneous.non­smoking.throughout":"mdi mdi-smoking-off","service.type.miscellaneous.non­smoking.rooms":"mdi mdi-smoking-off","service.type.popular.smoking.area":"mdi mdi-smoking","service.type.popular.smoking.room":"mdi mdi-smoking","service.type.popular.wifi.room":"mdi mdi-wifi","service.type.popular.wifi.all":"mdi mdi-wifi","service.type.popular.internet.point":"mdi mdi-wifi"}},e.transfersIcon=function(){return{CAR:"flaticon-car-black-side-view-pointing-left",LIMOUSINE:"flaticon-sedan-car-model",PULLMAN:"flaticon-bus-front",SHUTTLE:"flaticon-microbus",MINIVAN:"flaticon-van-black-transport-side-view-pointing-to-left",LUXURY_CAR:"flaticon-supercar"}},e.portalIcons=function(){return{PHONE:"mdi mdi-phone material-icons",EMAIL:"mdi mdi-email material-icons",PORTAL:"channel-icon channel-chroma",BOOKING:"channel-icon channel-booking",EXPEDIA:"channel-icon channel-expedia",VENERE:"channel-icon channel-venere",AIRBNB:"channel-icon channel-airbnb",AGODA:"channel-icon channel-agoda",OTHER:"mdi mdi-web material-icons"}},e})}(),function(){"use strict";function e(e){var n={};return n.response=function(n){return e.convertDateStringsToDates(n),n},n}e.$inject=["DateUtils"],angular.module("chroma.utils").factory("jsonDateInterceptor",e)}(),function(){"use strict";angular.module("chroma.utils").factory("NumberUtils",function(){var e={};return e.fixedDecimals=function(e,n){if(!e||0===e)return 0;var i=Number(e).toFixed(n||2);return Number(i).valueOf()},e.vatAmount=function(e,n){return this.fixedDecimals(e-this.taxableAmount(e,n))},e.taxableAmount=function(e,n){return this.fixedDecimals(n?e/((100+n)/100):e)},e.calculateDiscount=function(n,i,t){return n&&i?(n=parseFloat(n),i=parseFloat(i),t=t||"PRICE",e.fixedDecimals("PERCENTAGE"==t?n/100*i:100*i/n)):0},e.uniqueNumber=function(){var n=Date.now();return n<=e.uniqueNumber.previous?n=++e.uniqueNumber.previous:e.uniqueNumber.previous=n,n},e.uniqueNumber.previous=0,e.isEven=function(e){return e%2==0},e.isOdd=function(e){return 1==Math.abs(e%2)},e.defaultNumber=function(n,i){var t=Number(n);return isNaN(t)?e.defaultNumber(i,0):t},e.lcmArray=function(n){if(!_.isArray(n)||_.isEmpty(n))return!1;for(var i=n[0],t=1;t<n.length;t++)i=e.lcm(i,n[t]);return i},e.lcm=function(n,i){return"number"==typeof n&&"number"==typeof i&&(n&&i?Math.abs(n*i/e.gcd(n,i)):0)},e.gcd=function(e,n){for(e=Math.abs(e),n=Math.abs(n);n;){var i=n;n=e%n,e=i}return e},e})}(),function(){"use strict";angular.module("chroma.utils").factory("ObjectUtils",function(){var e={};return e.clearObject=function(e,n){if(e){var i=_.mapValues(e,function(e,i){return n&&n.test(i)?e:_.isArray(e)?[]:void 0});_.assign(e,i)}},e})}(),function(){"use strict";function e(e,n){({}).request=function(i){if(!navigator.onLine){n.warn("No connection! The request will be aborted: "+i.url);var t=e.defer();i.timeout=t.promise,t.reject()}return i}}e.$inject=["$q","$log"],angular.module("chroma.utils").factory("offlineInterceptor",e)}(),function(){"use strict";angular.module("chroma.utils").constant("REGEXP",e);var e={username:/^[a-z0-9_.-@]{3,32}$/,password:/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[@$!%*?&_+-]*)(?=\S+$).{8,32}$/,strong_password:/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[@$!%*?&_+-])(?=\S+$).{8,32}$/,email:/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i,zip:/^[0-9]{5}$/,province:/^[a-zA-Z]{2}$/,phone:/^([+]{0,1}[0-9]{2,4}){1}[0-9]{3,11}$/,creditCard:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,price:/^[0-9]+(\.[0-9]{1,2})?$/,priceNoStrict:/^[-+]*[0-9]+(\.[0-9]{1,2})?$/,vat:/^((AT)?U[0-9]{8}|(BE)?0[0-9]{9}|(BG)?[0-9]{9,10}|(CY)?[0-9]{8}L|(CZ)?[0-9]{8,10}|(DE)?[0-9]{9}|(DK)?[0-9]{8}|(EE)?[0-9]{9}|(EL|GR)?[0-9]{9}|(ES)?[0-9A-Z][0-9]{7}[0-9A-Z]|(FI)?[0-9]{8}|(FR)?[0-9A-Z]{2}[0-9]{9}|(GB)?([0-9]{9}([0-9]{3})?|[A-Z]{2}[0-9]{3})|(HU)?[0-9]{8}|(IE)?[0-9]S[0-9]{5}L|(IT)?[0-9]{11}|(LT)?([0-9]{9}|[0-9]{12})|(LU)?[0-9]{8}|(LV)?[0-9]{11}|(MT)?[0-9]{8}|(NL)?[0-9]{9}B[0-9]{2}|(PL)?[0-9]{10}|(PT)?[0-9]{9}|(RO)?[0-9]{2,10}|(SE)?[0-9]{12}|(SI)?[0-9]{8}|(SK)?[0-9]{10})$/,fiscalCode:/^([A-Za-z]{6}[0-9lmnpqrstuvLMNPQRSTUV]{2}[abcdehlmprstABCDEHLMPRST]{1}[0-9lmnpqrstuvLMNPQRSTUV]{2}[A-Za-z]{1}[0-9lmnpqrstuvLMNPQRSTUV]{3}[A-Za-z]{1})|([0-9]{11})$/,dateString:/^(\d{4}|\+\d{6})(?:-(\d{2})(?:-(\d{2})(?:T(\d{2}):(\d{2}):(\d{2})\.(\d{1,})(Z|([\-+])((\d{2}):(\d{2})|(\d{4})))?)?)?)?$/}}(),function(){"use strict";angular.module("chroma.utils").factory("ReviewsUtils",function(){var e={};return e.generateScoreLabel=function(e){if(e){var n;switch(e){case 4:n="review.score.bad";break;case 5:n="review.score.poor";break;case 6:n="review.score.sufficient";break;case 7:n="review.score.good";break;case 8:n="review.score.very.good";break;case 9:n="review.score.excellent";break;case 10:n="review.score.fabulous"}return n}},e})}(),function(){"use strict";function e(e){return function(n,i){if("text"===i){var t="";(t=e.trustAsHtml(n)).$$unwrapTrustedValue&&(t=t.$$unwrapTrustedValue()),n=t}return n}}e.$inject=["$sce"],angular.module("chroma.utils").factory("sceStrategy",e)}(),function(){"use strict";function e(e,n){var i=this;this.$$redirectUrl=n||"/login",this.responseError=function(n){return n.data&&401===n.data.status&&location.assign(i.$$redirectUrl),e.reject(n)}}angular.module("chroma.utils").provider("sessionExpiredInterceptor",function(){var n="/login";this.init=function(e){if(!_.isString(e))return!1;n=e},this.$get=["$q",function(i){return new e(i,n)}]})}(),function(){"use strict";angular.module("chroma.utils").factory("StringUtils",function(){var e={};return e.isBlank=function(e){return _.isUndefined(e)||_.isNull(e)||_.isEmpty(e)},e.isNotBlank=function(n){return!e.isBlank(n)},e.isEmpty=function(n){return e.isNotBlank(n)&&_.isEmpty(_.trim(n))},e.isNotEmpty=function(n){return!e.isEmpty(n)},e.normalizeForUrl=function(e,n){return _.toLower(_.replace(_.deburr(n?_.snakeCase(e):e),/[^\w]/gi,""))},e})}(),function(){"use strict";function e(e){var n={};return n.buildUrl=function(n,i){var t=e(i);return t.length>0&&(n+=(-1===n.indexOf("?")?"?":"&")+t),n},n.withParam=function(e,i,t){var r=e.split("?")[1],o=r?JSON.parse('{"'+r.replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(e,n){return""===e?n:decodeURIComponent(n)}):{};return o[i]=t,n.buildUrl(e,o)},n}e.$inject=["$httpParamSerializer"],angular.module("chroma.utils").factory("UrlBuilder",e)}();